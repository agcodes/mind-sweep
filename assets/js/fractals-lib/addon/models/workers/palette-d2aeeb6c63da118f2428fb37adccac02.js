import Color from"./color";export default class Palette{constructor(){this._palette=[]}create(e,t){if(t.length<2)throw"Merci d'indiquer au moins deux couleurs pour construire une palette.";for(var r=0,o=0,l=0,n=e,a=new Color,i=new Color,s=new Color,u=t.length;o<u;o++){if(!((i=t[o])instanceof Color))throw"La liste de couleurs doit comporter uniquement des instance de la classe Color.";if(o<1)s.copy(i);else{for(n=l,n=(l=parseInt(e/100*i.p))-n,a=new Color((i.r-s.r)/n,(i.g-s.g)/n,(i.b-s.b)/n,(i.a-s.a)/n);r<l;r++)s.add(a),this._palette.push(new Color(s));s.copy(i)}}}getColor(e){return e>=this._palette.length?e=this._palette.length-1:e<0&&(e=0),this._palette[e]}toUint8Array(){for(var e=this._palette.length,t=0,r=null,o=0,l=new ArrayBuffer(4*e),n=new Uint8Array(l);t<e;t++)r=this._palette[t],n[o++]=r.r,n[o++]=r.g,n[o++]=r.b,n[o++]=r.a;return n}}