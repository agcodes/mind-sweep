export default class Canvas2DDrawer{constructor(t){this._canvas=t?document.getElementById(t):null,this._ctx=this._canvas.getContext("2d"),this.context=this._ctx,this._width=this.getWidth(),this._height=this.getHeight(),this._imageData=this._ctx.getImageData(0,0,this._width,this._height),this._buf=new ArrayBuffer(this._imageData.data.length),this._buf32=new Uint32Array(this._buf),this._buf8=new Uint8ClampedArray(this._buf),this._bufIndex=0,this.isLittleEndian=this.isLittleEndian_()}getWidth(){return this._ctx.canvas.width}getHeight(){return this._ctx.canvas.height}isLittleEndian_(){return new Uint32Array(this._buf)[0]=134480385,1!==this._buf[3]}getBackBuffer(){return this._buf32}setBackBuffer=function(t){if(this._buf=t,null!=Uint8ClampedArray&&this._imageData.data instanceof Uint8ClampedArray)this._imageData.data.set(this._buf8);else{var i,e,s,h=0;for(e=0;e<this._height;e++)for(i=0;i<this._width;i++)for(s=0;s<4;s++,h++)this._imageData.data[h]=this._buf8[h]}this._ctx.putImageData(this._imageData,0,0)};pixel(t,i,e,s){var h,a,r,_;return this.isLittleEndian?(h=s,a=e,r=i,_=t):(h=t,a=i,r=e,_=s),h<<24|a<<16|r<<8|_}setPixel(t,i,e,s,h,a){return this._buf32[i*this._width+t]=this.pixel(e,s,h,a)}setStroke(t,i){this._ctx.strokeStyle=t,this._ctx.lineWidth=null!=i?i:1}drawLine(t,i,e,s){this._ctx.moveTo(t,i),this._ctx.lineTo(e,s),this._ctx.stroke()}drawCircle(t,i,e){this._ctx.beginPath(),this._ctx.arc(t,i,e,0,Math.PI/180*360,!1),this._ctx.stroke(),this._ctx.closePath()}drawBezierCurv(t,i,e,s,h,a,r,_){this._ctx.moveTo(t,i),this._ctx.bezierCurveTo(h,a,r,_,e,s),this._ctx.stroke();var n=this._ctx.strokeStyle,c=this._ctx.lineWidth;this.setStroke("blue",1),this.drawCircle(t,i,3),this.drawCircle(e,s,3),this.drawCircle(h,a,3),this.drawCircle(r,_,3),this.setStroke(n,c)}}