import CComplex from"./CComplex";export default class NewtonFractalFunctions{getDerivativeFunction(e){const d={f1:(e,d)=>e.pow(d-1).mulValues(d,0,0),f2:(e,d)=>new CComplex(d,0).mul(e.pow(d-1)).addValues(1,0,0),f4:(e,d)=>e.pow(d-1).mulValues(d,0,0),f7:(e,d)=>e.pow(d-1).mulValues(d,0,0),f8:(e,d)=>new CComplex(d,0).mul(e.pow(d-1)),f10:(e,d)=>new CComplex(d,0).mul(e.pow(d-1)).addValues(-1,0,0),f31:(e,d)=>new CComplex(1,0).sub(e.pow(d-1).mulValues(d,0,0))};return void 0===d[e]?null:d[e]}getFunction(e){return{multiple:(e,d,f,n,t,o)=>e.mul(new CComplex(o[0],o[1])).getC(f),f1:(e,d,f,n)=>e.getC(f).pow(d).subIn(n),f2:(e,d,f,n)=>e.add(e.getC(f).pow(d)).addIn(n),f3:(e,d,f,n)=>e.pow(d-2).add(e.getC(f).pow(d)).addIn(n),f4:(e,d,f,n)=>e.getC(f).pow(d).addIn(n),f5:(e,d,f,n)=>e.getC(f).pow(d).mul(n).addIn(e),f6:(e,d,f,n)=>e.getC(f).mul(e.pow(d).addIn(n)),f7:(e,d,f,n)=>e.pow(d).addIn(n).getC(f),f8:(e,d,f,n)=>e.pow(d).getC(f).sub(n.pow(d)),f9:(e,d,f,n)=>e.pow(d).add(n.add(e.pow(d-1)).getC(f)),f10:(e,d,f,n)=>e.getC(f).pow(d).sub(e).addIn(n),f11:(e,d,f,n,t)=>e.mul(n.add(e.pow(d)).add(e)).addIn(t).subIn(e).getC(f),f12:(e,d,f,n)=>e.pow(d).getC(f).add(n.div(e)),f13:(e,d,f,n)=>e.pow(d).getC(f).add(e.pow(d-1)).addIn(e).sub(n),f14:(e,d,f,n,t)=>e.pow(d).getC(f).add(t.mul(e.pow(d-1))).addIn(e).addIn(n),f15:(e,d,f,n,t)=>e.pow(d).getC(f).addIn(n).addIn(t),f16:(e,d,f,n)=>e.pow(d).getC(f).add(n).mul(e),f17:(e,d,f,n,t)=>e.pow(d-3).getC(f).add(e.pow(d).div(e.add(t))).addIn(n),f18:(e,d,f,n)=>e.pow(d).getC(f).add(e.add(n).div(e.add(new CComplex(1,0)))),f19:(e,d,f,n)=>e.pow(d).getC(f).add(n).div(e),f20:(e,d,f,n,t)=>e.pow(d).getC(f).sub(n),f21:(e,d,f,n)=>e.pow(d).getC(f).div(e.add(n).pow(d-1)).add(n),f22:(e,d,f,n)=>e.pow(d).getC(f).mul(e.pow(d-1).add(n)).div(e.pow(d-2).add(n)).addIn(n),f23:(e,d,f,n)=>e.pow(d-3).getC(f).add(e.pow(d)).addIn(n),f24:(e,d,f,n)=>e.pow(d).getC(f).add(e.pow(d-1)).add(n.mulReal(2)),f25:(e,d,f,n)=>e.pow(d).getC(f).add(n.add(e.pow(d-1))).add(n.add(e.pow(d-1))),f26:(e,d,f,n)=>e.pow(d).add(n).mul(e.add(n).squareAtan()).getC(f),f27:(e,d,f,n)=>e.pow(2*d).add(n).sub(e.pow(d)).getC(f),f28:(e,d,f,n)=>e.pow(d).add(n).sub(e.pow(2)).getC(f),f29:(e,d,f,n)=>n.add(e.pow(d)).abs().getC(f),f30:(e,d,f,n)=>e.pow(d).getC(f).abs().div(e).sub(n),f31:(e,d,f,n)=>e.getC(f).sub(e.pow(d)).sub(n),f32:(e,d,f,n)=>e.getC(f).sub(e.pow(d)).sub(n.abs()),f33:(e,d,f,n)=>e.sub(e.mul(n).pow(d)).sub(n).getC(f),f34:(e,d,f,n)=>e.getC(f).sub(e.pow(d/2).addIn(n)),f35:(e,d,f,n,t,o)=>e.sub(e.mul(new CComplex(o[0],o[1]))),f36:(e,d,f,n)=>e.pow(d).getC(f).add(e.pow(d-1)).add(e).sub(n).sub(n),f37:(e,d,f,n)=>e.abs().getC(f).pow(d).add(n),f38:(e,d,f,n)=>e.getC(f).abs().pow(d).sub(e).addIn(n),f39:(e,d,f,n)=>e.abs().pow(d).addIn(n).getC(f)}[e]}getFunctionDefinition(e,d,f,n,t){const o={f1:()=>"f(z)^n-c",f2:e=>"z+(f(z)^n)+c",f3:e=>"z^"+(e-2)+"+f(z)^n+c",f4:e=>"f(z)^n+c",f5:e=>"f(z)^n.c+z",f6:e=>"f(z)^n+c.z",f7:e=>"f(z^n+c)",f8:e=>"f(z^n+(c+z^"+(e-1)+"))",f9:e=>"f(z^n)-c^n",f10:e=>"f(z)^n-z+c",f11:e=>"",f12:e=>"f(z^n)+c/z",f13:e=>"f(z^n)+z^"+(e-1)+"+z-c",f14:e=>"",f15:e=>"f(z^n)+c+(2,0)",f16:e=>"(f(z^n)+c).z",f17:e=>"",f18:e=>"",f19:e=>"(f(z^n)+c)/z",f20:e=>"f(z^n)-c",f21:e=>"",f22:e=>"",f23:e=>"f(z^"+(e-3)+")+z^n+c",f24:e=>"f(z^n)+z^"+(e-1)+"+2.c",f25:e=>"",f26:e=>"",f27:e=>"f(z^"+2*e+"+c-z^n)",f28:e=>"f(z^n+c-z^2)",f29:e=>"f(|c+(z^n)|)",f30:e=>"|f(z^n)|/z-c",f31:e=>"f(z)-z^n-c",f32:e=>"z-z^n-|c|",f33:e=>"f(z-((z.c)^n)-c)",f36:e=>"f(z^n)+z^n-1+z-c",multiple:(e,d)=>"("+d[0]+"+"+d[1]+"i).z"};if(o[e]){const a=null!==t?" with c = ("+t.r+","+t.i+")":"",p=o[e](f,n,t);if("string"==typeof p){let e="";return e=""===d?this.replaceAllOccurrences(p.replace(/f\((.*?)\)/g,"$1"),"^n","^"+f):this.replaceAllOccurrences(this.replaceAllOccurrences(p,"f(",d+"(").trim(),"^n","^"+f),"("==e.substring(0,1)&&")"==e.substring(e.length-1)?this.removeParentheses(e.substring(1).substring(0,e.length-2)):this.removeParentheses(e+a)}}return""}removeParentheses(e){return e.startsWith("(")&&e.endsWith(")")?e.slice(1,-1):e}replaceAllOccurrences(e,d,f){const n=d.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(n,"g");return e.replace(t,f)}}