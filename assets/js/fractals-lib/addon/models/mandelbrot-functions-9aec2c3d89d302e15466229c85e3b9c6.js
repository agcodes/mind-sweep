import CComplex from"./CComplex";export default class MandelbrotFunctions{getDerivativeFunction(f){const d={f1:(f,d)=>new CComplex(d,0).mul(f.pow(d-1))};return void 0===d[f]?null:d[f]}getFunction(f){return{multiple:(f,d,o,n,e)=>f.mul(new CComplex(e[0],e[1])).getC(n),bedouin:(f,d,o,n,e)=>new CComplex(f.r*f.r-f.i*f.i-f.t*f.t,2*f.r*f.i,2*f.r*f.t).addIn(o),bedouin_2:(f,d,o,n,e)=>{const a=f.r*f.r-f.i*f.i-f.t*f.t,t=2*f.r*f.t,p=2*f.r*f.i;return new CComplex(a+Math.sin(o.r),t+Math.sin(o.i),p+Math.sin(o.t))},minkowski:(f,d,o,n,e)=>new CComplex(2*f.r-f.r*f.r*f.r-2*f.i*f.i+o.r,2*f.i-3*f.i*f.r*f.r+o.i,0).getC(n),herman:(f,d,o,n)=>{const e=new CComplex(1,0);return o.mul(f.pow(d).addReal(4)).div(e.sub(f.mulReal(4))).getC(n)},"barnsley-tree":(f,d,o,n)=>o.mul(f.sub(new CComplex(f.signR(),0)).pow(d)).getC(n),j_o:(f,d,o)=>f.pow(d).addIn(o),f1_rot:(f,d,o,n,e,a)=>a%2!=0?void 0===e.rot?null:f.pow(d).rot(e.rot).addIn(o).getC(n):f.pow(d).addIn(o).getC(n),f1_alt:(f,d,o,n,e,a)=>a%2!=0?null:f.pow(d).addIn(o).getC(n),f1:(f,d,o,n,e)=>f.pow(d).addIn(o).getC(n),f2:(f,d,o,n,e)=>f.pow(d).subIn(o).getC(n),f3:(f,d,o,n,e)=>null!==e?f.abs().pow(d).addIn(o).getC(n).transform(e):f.abs().pow(d).addIn(o).getC(n),f3_rot:(f,d,o,n,e)=>f.abs().pow(d).rot(e.rot).addIn(o).getC(n),"f3-2":(f,d,o,n,e)=>f.pow(d).abs().addIn(o).getC(n),"f3-3":(f,d,o,n,e)=>f.abs().pow(d).add(o).add(new CComplex(e[0],e[1])).getC(n),f4:(f,d,o,n,e)=>o.mul(f.pow(d).getC(n)),f5:(f,d,o,n,e)=>f.pow(d).abs().div(o.abs()).addIn(o).getC(n),f6:(f,d,o,n,e)=>f.abs().pow(d).div(o).addIn(o).getC(n),f7:(f,d,o,n,e)=>f.pow(d).mul(o).abs().addIn(o).getC(n),f8:(f,d,o,n,e)=>f.abs().pow(d).addIn(o).conjugate().getC(n),f9:(f,d,o,n,e)=>f.abs().pow(d).getC(n).addIn(o),f14:(f,d,o,n,e)=>f.pow(d).getC(n).add(o),f10:(f,d,o,n,e)=>f.abs().pow(d).sub(o).getC(n),f35:(f,d,o,n,e)=>f.pow(d).getC(n).sub(o.pow(d)),f36:(f,d,o,n,e)=>f.pow(d).div(o).getC(n),f41:(f,d,o,n,e)=>f.pow(d).conjugate().add(o).getC(n),f43:(f,d,o,n,e)=>f.pow(d).add(f).add(o).getC(n),f44:(f,d,o,n,e)=>o.pow(d).sub(f.pow(d)).getC(n),f48:(f,d,o,n,e)=>f.pow(d).add(f.conjugate()).conjugate().add(o).getC(n),f49:(f,d,o,n,e)=>f.pow(d).conjugate().add(o).sub(f).getC(n),f51:(f,d,o,n,e)=>{const a=f.pow(d);return a.add(a).add(o).getC(n)},f52:(f,d,o,n,e)=>o.add(f.pow(d).conjugate()).sub(f).getC(n),f55:(f,d,o,n,e)=>f.pow(d).sub(f).add(o).getC(n),f56:(f,d,o,n,e)=>f.pow(d).add(o).pow(d).add(o.pow(d).add(f)).getC(n),f65:(f,d,o,n,e)=>f.pow(d).add(o.pow(d-(e[0]?e[0]:1)).abs().add(o)).getC(n),f11:(f,d,o,n,e)=>f.pow(d).div(o).getC(n).addIn(o),f23:(f,d,o,n,e)=>f.abs().pow(d).getC(n).div(o),"f12-10":(f,d,o,n,e)=>f.abs().pow(d).getC(n).div(o),f12:(f,d,o,n,e)=>f.abs().pow(d).getC(n).div(o.abs()).addIn(o),"f12-2":(f,d,o,n,e)=>f.abs().pow(d).div(o.abs()).getC(n).addIn(o),"f12-3":(f,d,o,n,e)=>f.abs().pow(d).getC(n).div(o.abs()).addIn(o).getC(n),"f12-4":(f,d,o,n,e)=>f.abs().pow(d).getC(n).div(o.abs()).abs().addIn(o),"f12-5":(f,d,o,n,e)=>f.abs().pow(d).getC(n).iAbs().div(o.abs()).addIn(o),"f12-6":(f,d,o,n,e)=>f.abs().pow(d).getC(n).div(o.pow(d).abs()).addIn(o),"f12-7":(f,d,o,n,e)=>f.abs().getC(n).pow(d).div(o.abs()).addIn(o).getC(n),"f12-8":(f,d,o,n,e)=>f.pow(d).abs().div(o.pow(d)).addIn(o).getC(n),"f12-9":(f,d,o,n,e)=>f.abs().pow(d).div(o.abs()).addIn(o).getC(n),"f12-11":(f,d,o,n,e)=>f.abs().pow(d).getC(n).div(o).getC(n),"f12-12":(f,d,o,n,e)=>f.abs().pow(d).getC(n).div(o).add(o),f13:(f,d,o,n,e)=>f.div(o).getC(n).pow(d),f15:(f,d,o,n,e)=>f.pow(d).mul(o).sin().abs().addIn(o).getC(n),f16:(f,d,o,n,e)=>f.pow(d).mul(o).csc().abs().addIn(o).getC(n),f17:(f,d,o,n,e)=>f.pow(d).div(o).abs().addIn(o).getC(n),f18:(f,d,o,n,e)=>f.abs().pow(d).cosCoshSinSinh().addIn(o).getC(n),f19:(f,d,o,n,e)=>f.div(o).pow(d).abs().addIn(o).getC(n),f20:(f,d,o,n,e)=>f.mul(o).pow(d).abs().addIn(o).getC(n),f21:(f,d,o,n,e)=>f.abs().pow(d).div(o).abs().addIn(o).getC(n),f22:(f,d,o,n,e)=>f.abs().pow(d).cosCoshSinSinh2().addIn(o).getC(n),f24:(f,d,o,n,e)=>o.mul(f.pow(d+1).add(f.pow(2)).div(f.pow(d-1)).getC(n)),f25:(f,d,o,n,e)=>o.mul(f.add(f.sin()).div(f.pow(d)).getC(n)),f26:(f,d,o,n,e)=>o.conjugate().mul(f.pow(d-1).div(f.pow(d+1)).conjugate().getC(n)).mul(o),f27:(f,d,o,n,e)=>o.mul(o.pow(d+1).add(f.pow(2)).div(f.pow(d-1)).getC(n)),f28:(f,d,o,n,e)=>o.mul(f.add(f.pow(d)).div(f.pow(d+1)).getC(n)),f29:(f,d,o,n,e)=>o.mul(f.pow(d).getC(n)),f30:(f,d,o,n,e)=>o.mul(f.pow(d).add(f.pow(2)).div(f.pow(d-1)).getC(n)),f31:(f,d,o,n,e)=>o.mul(f.pow(d+1).add(f.pow(2)).div(f.pow(d-1)).getC(n)),f32:(f,d,o,n,e)=>o.conjugate().mul(f.pow(-d).div(f.pow(d)).getC(n)).mul(o),f33:(f,d,o,n,e)=>o.mul(f.pow(d+1).div(f.pow(d-1)).getC(n)),f34:(f,d,o,n,e)=>{const a=f.pow(d);return o.mul(a.add(f.pow(2)).div(a).getC(n))},f38:(f,d,o,n,e)=>o.mul(f.pow(d).getC(n).addReal(e[0]?e[0]:1/8)),f40:(f,d,o,n,e)=>o.pow(-d).mul(f.pow(d+1).add(f.pow(2)).div(f.pow(d-1)).getC(n)),f45:(f,d,o,n,e)=>f.pow(d).add(o.div(f)).getC(n),f46:(f,d,o,n,e)=>f.pow(d).add(o).div(f).getC(n),f47:(f,d,o,n,e)=>f.pow(d).add(o).mul(f).getC(n),f53:(f,d,o,n,e)=>f.pow(d).add(o).mul(f).sub(f).getC(n),f54:(f,d,o,n,e)=>o.add(f.pow(d).conjugate()).add(o).getC(n),f57:(f,d,o,n,e)=>0!==f.signR()?(f=o.mul(f.pow(d-1).div(f.pow(d+1)).conjugate().getC(n)).mul(f),o.mul(f.mul(f))):null,f58:(f,d,o,n,e)=>{const a=f.pow(d),t=f.pow(d-2);return a.add(t).add(o).div(a.sub(t).add(o)).addReal(-2,0).getC(n)},f59:(f,d,o,n,e)=>{const a=f.pow(d),t=a.sub(o);return a.mul(a.add(o).div(t.pow(2))).getC(n)},f60:(f,d,o,n,e)=>o.div(f.pow(d+1).add(f.pow(2)).div(f.pow(d-1)).getC(n)),f61:(f,d,o,n,e)=>o.pow(-d).mul(f.pow(d-1).add(f.pow(2)).div(f.pow(d+1))).getC(n),f62:(f,d,o,n,e)=>o.pow(-d).mul(f.pow(d+1).add(f.pow(-2))).getC(n),f63:(f,d,o,n,e)=>o.add(f.pow(d).mul(f.pow(-1))).getC(n),f64:(f,d,o,n,e)=>f.pow(d).add(o.div(f.pow(-d).conjugate())).getC(n),f66:(f,d,o,n,e)=>f.pow(d).add(o.pow(-d).abs().add(o)).getC(n),f67:(f,d,o,n,e)=>f.pow(d).add(f.abs().add(o).div(f.abs().addValues(1,0,0))).getC(n),f68:(f,d,o,n,e)=>o.mul(f.div(f.pow(d)).add(f).mul(o)).getC(n),f96:(f,d,o,n,e)=>f.abs().pow(d).div(f.abs().add(o).getC(n)),"f69-1":(f,d,o,n,e)=>{const a=f.pow(d);return a.add(o).div(a.sub(o)).getC(n)},"f69-2":(f,d,o,n,e)=>{const a=f.pow(d);return a.add(o).div(a.addReal(e[0])).getC(n)},"f69-3":(f,d,o,n,e)=>{const a=f.pow(d),t=a.addReal(-(d-1));return a.addReal(d+e[0]).div(t).sub(o).getC(n)},f70:(f,d,o,n,e)=>f.pow(d-3).add(f.pow(d).div(f.addReal(2))).add(o).getC(n),f71:(f,d,o,n,e)=>o.mul(f.pow(d).add(f.pow(-d)).div(f.pow(d-1))).getC(n),f72:(f,d,o,n,e)=>f.pow(d).add(o).div(f).getC(n),f73:(f,d,o,n,e)=>o.add(f.pow(d).getC(n).add(o.pow(d))),f74:(f,d,o,n,e)=>{const a=f.pow(d).addReal(1-d).getC(n);return f.pow(d).add(o).div(a.pow(2))},f75:(f,d,o,n,e)=>f.mul(f.pow(d).add(o).getC(n).conjugate().squareDiv()),f76:(f,d,o,n,e)=>{const a=f.pow(d).getC(n),t=f.pow(-d-2);return a.add(t).add(o).div(a.sub(t).add(o))},f77:(f,d,o,n,e)=>0!==f.signR()?(f=o.mul(f.pow(d-1).div(f.pow(d+1)).conjugate().getC(n)).mul(f),o.add(o.mul(f.mul(f)))):null,f78:(f,d,o,n,e)=>o.mul(f.pow(d).squareDiv().addReal(1/32)).getC(n),f79:(f,d,o,n,e)=>(f=o.pow(d).mul(f.pow(d-1).conjugate()).mul(f).getC(n),o.add(o.mul(f.pow(2)))),f80:(f,d,o)=>o.mul(f.pow(d).add(f.pow(2)).squareDiv()),f81:(f,d,o,n,e)=>o.pow(d).mul(f.pow(d-1).add(f.pow(2)).div(f.pow(d+1)).getC(n)),f82:(f,d,o,n,e)=>0!==f.signR()?o.mul(f.pow(d-1).div(f.pow(d+1)).conjugate().getC(n)).mul(f):null,f83:(f,d,o,n,e)=>f.pow(d).add(o.pow(d)).getC(n),f84:(f,d,o,n,e)=>f.pow(d).add(o).pow(d).getC(n),f85:(f,d,o,n,e)=>f.pow(d).add(o).add(o).getC(n),f86:(f,d,o,n,e)=>o.add(f.pow(d)).abs().getC(n),f87:(f,d,o,n,e)=>f.abs().add(o).pow(d).sub(o).getC(n),f88:(f,d,o,n,e)=>f.abs().add(o).pow(d).add(o).getC(n),f89:(f,d,o,n,e)=>f.abs().pow(d).abs().add(o).getC(n),f90:(f,d,o,n,e)=>f.pow(d).add(o.abs()).getC(n),f91:(f,d,o,n,e)=>f.rAbs().pow(d).add(o).getC(n),f93:(f,d,o,n,e)=>o.add(f.pow(d).sub(f.pow(d-1))).getC(n),f94:(f,d,o,n,e)=>o.add(f.pow(d).sub(f.mulReal(-1).pow(d+e[0]))).getC(n),f95:(f,d,o,n,e)=>f.pow(d).sub(f.mulReal(void 0!==e[0]?e[0]:-1).pow(d+(void 0!==e[1]?e[1]:-1.0001))).add(o).getC(n),f101:(f,d,o,n,e)=>o.mul(f.add(f.getC(n)).div(f.pow(d)).cosh()),f102:(f,d,o,n,e)=>f.abs().pow(d).cosh().add(o).conjugate().getC(n),f103:(f,d,o,n,e)=>o.mul(f.div(f.pow(d)).cosh().getC(n).conjugate()),f104:(f,d,o,n,e)=>f.sin().abs().pow(d).cosh().add(o).conjugate().getC(n),f105:(f,d,o,n,e)=>o.mul(f.pow(d).tan().getC(n)),f106:(f,d,o,n,e)=>o.mul(f.pow(d).cosh().sin().conjugate().getC(n)),f107:(f,d,o,n,e)=>o.mul(f.cosCoshSinSinh2()).pow(d).getC(n),f108:(f,d,o,n,e)=>o.mul(f.pow(d).add(f.pow(2)).squareTan()).getC(n),f109:(f,d,o,n,e)=>o.mul(f.pow(d).add(f.pow(2)).expDivSinh()).getC(n),f110:(f,d,o,n,e)=>f.pow(d).mul(o.mul(f).expDiv()).conjugate().getC(n),f111:(f,d,o,n,e)=>f.conjugate().cosCoshSinSinh2().mul(f.pow(d)).add(o).getC(n),f112:(f,d,o,n,e)=>o.mul(f.pow(d).expDiv()).getC(n),f113:(f,d,o,n,e)=>o.conjugate().mul(f.pow(d-1).div(f.pow(d+1)).cos()).mul(o).squareTan().conjugate().getC(n),f114:(f,d,o,n,e)=>o.add(f.pow(d).mul(f.pow(-1))).squareTan().getC(n),f115:(f,d,o,n,e)=>o.mul(f.pow(d).squareTan()).getC(n),f116:(f,d,o,n,e)=>{const a=f.pow(d);return o.add(a.add(a).squareAtan()).getC(n)},f117:(f,d,o,n,e)=>o.mul(f.pow(d).add(f.pow(2)).squareAtan()).getC(n),f118:(f,d,o,n,e)=>f.pow(d).add(o).add(new CComplex(e[0]?e[0]:0,e[1]?e[1]:0)).getC(n),f119:(f,d,o,n,e)=>f.pow(d).add(o).mul(new CComplex(e[0]?e[0]:0,e[1]?e[1]:0)).getC(n),f120:(f,d,o,n,e)=>o.pow(d).add(f).getC(n),f121:(f,d,o,n,e)=>o.mul(f.pow(d).mul(new CComplex(e[0]?e[0]:0,e[1]?e[1]:0)).getC(n)),f122:(f,d,o,n,e)=>f.getC(n).pow(d).add(o).mul(o),f123:(f,d,o,n,e)=>o.powComplex(o).add(f.getC(n).pow(d).add(o)),f124:(f,d,o,n,e)=>f.abs().getC(n).pow(d).add(o).add(o.powComplex(o)),f125:(f,d,o,n,e)=>f.getC(n).pow(d).abs().add(o).sub(o.powComplex(o)),f126:(f,d,o,n,e)=>f.abs().pow(d).div(o).abs().add(o.powComplex(o)).getC(n),0:(f,d,o,n,e)=>f}[f]}getZnDef(f){return 1==f?"z":"z^"+f}getFunctionDefinition(f,d,o,n,e){const a={multiple:(f,d)=>"("+d[0]+"+"+d[1]+"i).z",herman:()=>"f(c.(z^n+4)/(1-4.z))","barnsley-tree":()=>"c.(sign(z)^m)",j_o:()=>"z^n+c",f1:()=>"f(z^n+c)",f1_rot:()=>"f(z^n+c) || f(rot(z^n)+c)",f2:()=>"f(z^n-c)",f3:()=>"f(|z|^n+c)","f3-2":()=>"f(|z^n|+c)","f3-3":()=>"f(|z|^n+c+c)",f4:()=>"f(c.z^n)",f5:()=>"f(|z^n|/|c|+c)",f6:()=>"f(|z|^n/c+c)",f7:()=>"f(|z^n.c|+c)",f8:()=>"f(conj(|z|^n+c))",f9:()=>"f(|z|n)+c",f10:()=>"f(|z|n-c)",f14:()=>"f(z^n)+c",f35:()=>"f(z^n)-c^n",f36:()=>"f(z^n/c)",f41:()=>"f(conj(z^n)+c)",f43:()=>"f(z^n+z+c)",f44:()=>"f(c^n-z^n)",f48:()=>"f(conj(z^n+conj(z))+c)",f49:()=>"f(conj(z^n)+c-z)",f51:()=>"f(z^n+z^n+c)",f52:()=>"f(c+conj(z^n)-z)",f55:()=>"f(z^n-z+c)",f56:()=>"f((z^n+c)^n+(c^n+z))",f65:()=>"f(|z^n+c^(m-a)|+c)",f11:()=>"f(z^n/c)+c",f23:()=>"f(|z|^n)/c","f12-10":()=>"f(|z|^n)/c",f12:()=>"f(|z|^n)/|c|+c","f12-2":()=>"f(|z|^n/|c|)+c","f12-3":()=>"f(f(|z|^n)/|c|+c)","f12-4":()=>"|f(|z|^n)/|c||+c","f12-5":()=>"iabs(f(|z|^n))/|c|+c","f12-6":()=>"f(|z|^n)/(|c^n|)+c","f12-7":()=>"f(f(|z|)^n/|c|+c)","f12-8":()=>"f(|z^n|/c^n+c)","f12-9":()=>"f(|z|^n/|c|+c)","f12-11":()=>"f(f(|z|^n)/c)","f12-12":()=>"f(|z|^n)/c+c",f13:()=>"f(z/c)^n",f15:()=>"f(|sin(z^n.c)|+c)",f16:()=>"f(|csc(z^n.c)|+c)",f17:()=>"f(|z/c|+c)",f18:()=>"",f19:()=>"f(|(z/c)^n|+c)",f20:()=>"f(|(z.c)^n|+c)",f21:()=>"f(|z|^n/c|+c)",f22:()=>"",f24:f=>"f((c.z^"+(f+1)+"+z^2)/(z^"+(f-1)+"))",f25:()=>"f(c.(z+sin(z))/z^n)",f26:f=>"f(conj(conj(c).z^"+(f-1)+"/z^"+(f+1)+"))",f27:f=>"f(c.(c^"+(f+1)+"+z^2)/z^"+(f-1)+")",f28:f=>"f(c.(z+z^n)/z^"+(f+1)+")",f29:f=>"f(c.z^n)",f30:f=>"f(c.(z^n+z^2)/z^"+(f-1)+"))",f31:f=>"f(c.((z^"+(f+1)+"+z^2)/z^"+(f-1)+"))",f32:()=>"",f33:()=>"f(c.(z^"+(o+1)+"/z^"+(o-1)+"))",f34:()=>"f(c.(z^n+z^2)/z^n)",f38:()=>"",f40:()=>"",f45:()=>"f(z^n+c/z)",f46:()=>"f((z^n+c)/z)",f47:()=>"f((z^n+c).z)",f53:()=>"f((z^n+c).z-z)",f54:()=>"f(c+conj(z^n)+c)",f57:()=>"",f58:()=>"",f59:()=>"f(z^n.((z^n+c)/(z-c)^2))",f60:f=>"f((c/(z^"+(f+1)+"+z^n)/z^"+(f-1)+")",f61:()=>"",f62:()=>"",f63:()=>"f(c+(z^n.z^-1))",f64:f=>"f(z^n+(c/conj(z^"+-f+"))",f66:()=>"",f67:()=>"",f68:()=>"f(c.((z/z^n+z).c))","f69-1":()=>"f((z^n+c)/(z^n-c))",f96:()=>"(|z|^n+c)/f(|z|)","f69-2":()=>"","f69-3":()=>"",f70:()=>"",f71:()=>"f(c.(z^n+z^"+-o+")/z^"+(o-1)+")",f72:()=>"f((z^n+c)/z)",f73:()=>"c+f(z^n)+c^n",f74:f=>"(z^n+c)/f(z^n+(1-n,0))^2",f75:()=>"",f76:()=>"",f77:()=>"",f78:()=>"",f79:()=>"",f80:()=>"",f81:()=>"",f82:()=>"",f83:()=>"f(z^n+c^n)",f84:()=>"f((z^n+c)^n)",f85:()=>"f((z^n+c+c))",f86:()=>"f(|c+zn|)",f87:()=>"f((|z|+c)^n-c)",f88:()=>"f((|z|+c)^n+c)",f89:()=>"f(||z|^n|+c)",f90:()=>"f(z^n+|c|)",f91:()=>"",f93:()=>"f(c+z^n-z^"+(o-1)+")",f94:(f,d)=>"",f95:(f,d)=>1===d[0]?"f(z^n-(z^"+(f+(void 0!==d[1]?d[1]:-1.0001))+")+c)":"f(z^n-(("+(void 0!==d[0]?d[0]:-1)+",0).z^"+(f+(void 0!==d[1]?d[1]:-1.0001))+")+c)",f101:()=>"c.cosh((z+f(z))/z^n)",f102:()=>"f(conj(cosh(|z|^n)+c))",f103:()=>"",f104:()=>"f(conj(cosh(|sin(z)|^n)+c))",f105:()=>"f(tan(c.z^n))",f106:()=>"f(c.conj((sin(cosh(z^n))))",f107:()=>"",f108:()=>"",f109:()=>"",f110:()=>"",f111:()=>"",f112:()=>"",f113:()=>"",f114:()=>"",f115:()=>"",f116:()=>"",f117:()=>"",f118:()=>"f(z^n+c+"+n[0]+")",f119:(f,d,o)=>"("+d[0]+","+d[1]+").z^n+c",f120:()=>"c^n+z",f121:()=>"",f122:()=>"f(z).pow(n).mul(c)",f123:()=>"c^c+f(z)^n+c"};if(a[f]){const t=null!==e?" with c = ("+e.r+","+e.i+")":"",p=a[f](o,n,e);if("string"==typeof p){const f=this.replaceAllOccurrences(this.replaceAllOccurrences(p,"f(",d+"(").trim(),"^n","^"+o);return this.removeParentheses(f+t)}}return""}removeParentheses(f){return f.startsWith("(")&&f.endsWith(")")?f.slice(1,-1):f}replaceAllOccurrences(f,d,o){const n=d.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),e=new RegExp(n,"g");return f.replace(e,o)}}