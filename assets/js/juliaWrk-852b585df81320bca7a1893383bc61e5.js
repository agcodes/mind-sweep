var _buffer,_buf8;importScripts("complex-ffa882907b8137fabfaa13fbb20dfa0e.js");var calc=function(e,f,a){for(var r=e.a,o=e.b,s=0,t=0;s<4&&t<a;)t++,e.a=r,e.b=o,s=(r=e.a*e.a-e.b*e.b+f.a)*r+(o=e.a*e.b*2-f.b)*o;return.5+(s=(s=s>4?4*t+s:0)<256?s>0?s:0:255)},convertCoordinateToComplex=function(e,f,a,r,o){e.a=f/r*3.6-1.8,e.b=a/o*3.6-1.8};self.addEventListener("message",(function(e){self.postMessage=self.webkitPostMessage||self.postMessage;var f,a,r,o,s,t=e.data,b=t.x2-t.x1,n=t.y2-t.y1,i=new Complex,c=new Complex(t.c.a,t.c.b);for(_buffer=new ArrayBuffer(b*n+1),(_buf8=new Uint8Array(_buffer))[0]=t.wid,o=0,a=t.y1;a<t.y2;o++,a++)for(r=0,f=t.x1;f<t.x2;r++,f++)convertCoordinateToComplex(i,f,a,t.width,t.height),s=calc(i,c,t.iter),_buf8[o*b+r+1]=s;self.postMessage(_buffer,[_buffer])}),!1);